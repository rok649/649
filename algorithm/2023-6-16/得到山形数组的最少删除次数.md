# 得到山形数组的最少删除次数
<algorithmLevel level="2"/>


我们定义`arr`是 **山形数组**当且仅当它满足：

- arr.length >= 3
- 存在某个下标`i`（**从 0 开始**）满足`0 < i < arr.length - 1`且：
- - `arr[0] < arr[1] < ... < arr[i - 1] < arr[i]`
- - `arr[i] > arr[i + 1] > ... > arr[arr.length - 1]`
给你整数数组`nums` ，请你返回将 `nums`变成 **山形状数组**的 **最少**删除次数。



## 示例 1
```
输入：nums = [1,3,1]
输出：0
解释：数组本身就是山形数组，所以我们不需要删除任何元素。
```
## 示例 2
```
输入：nums = [2,1,1,5,6,2,3,1]
输出：3
解释：一种方法是将下标为 0，1 和 5 的元素删除，剩余元素为 [1,5,6,3,1] ，是山形数组。
```

## 提示

- $3 <= nums.length <= 1000$
- $1 <= nums[i] <= 10^9$
- 题目保证`nums` 删除一些元素后一定能得到山形数组。

## 代码
<stackblitz project-id="get-the-minimum-number-of-deletions-of-the-mountain-arra"/>

## 答案

::: details 解析
根据山形数组的定义，山形数组存在唯一的最大值，称为峰值，峰值将山形数组分成两段，峰值左侧单调递增，峰值右侧单调递减。

为了计算将数组 **nums** 变成山形数组的最少删除次数，需要计算数组 **nums** 的可以构成山形数组的最长子序列，数组长度与最长山形数组子序列长度之差即为最少删除次数。

计算整个数组的最长山形数组子序列的长度的方法是，分别将数组中的每个元素作为峰值，计算以峰值作为结尾元素的最长递增子序列长度和以峰值作为开始元素的最长递减子序列长度，得到该峰值对应的最长山形数组子序列的长度，遍历所有可能的峰值之后即可得到整个数组的最长山形数组子序列的长度。

计算最长递增子序列的长度与最长递减子序列的长度可以使用动态规划或二分查找实现。
:::
<<< 得到山形数组的最少删除次数.js
